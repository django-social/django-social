{% extends "base.html" %}
{% load i18n %}
{% load media %}

{% block content %}
<div id="filter_box">
<h2>Файлы{% if category %} категории {{ category.title }}{% endif %}</h2>
{% if category %}
    <a href="{% url file_library:index %}">
        Все категории
    </a>
<br />
{% endif %}
{% if can_manage %}
    <div class="actions">
    <div class="but media">
    <a href="{% url file_library:add_file %}" >Добавить файл</a>
    </div>
    <div class="but media">
    <a href="{% url file_library:add_category %}">Добавить категорию</a>
    </div>
    </div><br />
{% endif %}

<div id="content-main">

<table class="media-files" border="1" width="100%" cellpadding="0" cellspacing="0">
<tr>
    <th>Название файла</th>
    <th>Категория</th>
    <th>Управление</th>
</tr>
{% for file in files %}
<tr>
    <td>
        <a href="{% url file_library:file_view id=file.id %}">
            {{ file.name }}
        </a>
    </td>
    <td>
    {% if not category %}
        <a href="{% url file_library:category_view id=file.category.id %}">
            {{ file.category.title }}
        </a>
    {% endif %}
    </td>
    <td>
    {% if can_manage %}
        <a class="delete" title="{% trans 'Delete' %}"
           href="{% url file_library:file_delete id=file.id %}">
            {% trans "Delete" %}
        </a>
        <a class="edit" title="{% trans 'Edit' %}"
            href="{% url file_library:file_edit id=file.id %}">{% trans "Edit" %}
        </a>
    {% endif %}
    </td>
</tr>
{% endfor %}
</table>
</div>

</div>    
{% endblock %}
